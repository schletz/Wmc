import{_,o as i,c as d,b as t,w as c,v as u,t as l,d as r,e as m,F as h,r as p,f as v,p as g,a as y}from"./index.cfa481dc.js";const n=a=>(g("data-v-b32258e4"),a=a(),y(),a),w={id:"createArticle"},b=n(()=>t("h3",null,"Neuer Artikel",-1)),f={class:"form"},k={class:"form-row"},U=n(()=>t("div",{class:"label"},"Headline",-1)),V={class:"control"},C={key:0,class:"error"},A={class:"form-row"},D=n(()=>t("div",{class:"label"},"Content",-1)),S={class:"control"},G={key:0,class:"error"},I={class:"form-row"},L=n(()=>t("div",{class:"label"},"Image URL",-1)),B={class:"control"},F={key:0,class:"error"},N={class:"form-row"},j=n(()=>t("div",{class:"label"},"Category",-1)),M={class:"control"},O=["value"],$={key:0,class:"error"},E={class:"form-row"},H=n(()=>t("div",{class:"label"},null,-1)),K={class:"control"},R={key:0},T={data(){return{categories:[],model:{},validation:{},message:""}},async mounted(){try{this.categories=(await v.get("category")).data}catch{alert("Fehler beim Laden der Daten.")}},methods:{async sendData(){this.validation={},this.model.authorGuid=this.$store.state.user.guid;try{await v.post("news",this.model),this.model={},this.validation={},this.message="Dein Artikel wurde gespeichert."}catch(a){a.response.status==400&&(this.validation=Object.keys(a.response.data.errors).reduce((e,s)=>{const o=s.charAt(0).toLowerCase()+s.slice(1);return e[o]=a.response.data.errors[s][0],e},{}),console.log(this.validation))}}}},q=Object.assign(T,{__name:"CreateArticleView",setup(a){return(e,s)=>(i(),d("div",w,[b,t("div",f,[t("div",k,[U,t("div",V,[c(t("input",{type:"text","onUpdate:modelValue":s[0]||(s[0]=o=>e.model.headline=o)},null,512),[[u,e.model.headline]]),e.validation.headline?(i(),d("div",C,l(e.validation.headline),1)):r("",!0)])]),t("div",A,[D,t("div",S,[c(t("textarea",{"onUpdate:modelValue":s[1]||(s[1]=o=>e.model.content=o)},null,512),[[u,e.model.content]]),e.validation.content?(i(),d("div",G,l(e.validation.content),1)):r("",!0)])]),t("div",I,[L,t("div",B,[c(t("input",{type:"text","onUpdate:modelValue":s[2]||(s[2]=o=>e.model.imageUrl=o)},null,512),[[u,e.model.imageUrl]]),e.validation.imageUrl?(i(),d("div",F,l(e.validation.imageUrl),1)):r("",!0)])]),t("div",N,[j,t("div",M,[c(t("select",{"onUpdate:modelValue":s[3]||(s[3]=o=>e.model.categoryGuid=o)},[(i(!0),d(h,null,p(e.categories,o=>(i(),d("option",{key:o.guid,value:o.guid},l(o.name),9,O))),128))],512),[[m,e.model.categoryGuid]]),e.validation.categoryGuid?(i(),d("div",$,l(e.validation.categoryGuid),1)):r("",!0)])]),t("div",E,[H,t("div",K,[t("button",{type:"submit",onClick:s[4]||(s[4]=o=>e.sendData())},"Senden"),e.message?(i(),d("div",R,l(e.message),1)):r("",!0)])])])]))}}),J=_(q,[["__scopeId","data-v-b32258e4"]]);export{J as default};
